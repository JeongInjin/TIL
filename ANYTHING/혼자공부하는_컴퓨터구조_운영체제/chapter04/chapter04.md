#4장
- ALU 와 제어장치
  - 
- 산술논리연산장치 ALU
  - 연산한 결과값을 플래그로 내보냄
  - 레지스터를 통해 피연산자(오퍼랜드)를 받아들이거, 제어장치로 부터 제어신호를 받는다.
    - 제어신호: 컴퓨터 부품들을 관리하고 작동시키기 위한 일종의 전기 신호
    - 
- 플래그 레지스터
  - 연산 결과에 대한 추가적인 상테 정보를 플래그라 함.
  
- 제어장치
  - 
- 클럭을 받아들인다.
- 해석해야 할 명령어를 받아들인다.
  - 명령어 레지스터
- 플래그 레지스터 속 플래그 값을 받아들인다.
- 시스템버스, 그중에서 제어버스로 전달된 제어 신호를 받아들인다.


- 제제어장치는 CPU 내부와 외부로 제어신호를 내보낸다.


- 레지스터
  - 
- 반드시 알아야 할 레지스터
- 8가지 베이스를 살펴보자.


- 프로그램 카운터
- 명령어 레지스터
- 메모리 주소 레지스터
- 메모리 버퍼 레지스터

- 플래그 레지스터
- 범용 레지스터
- 스택 포인터
- 베이스 레지스터

---
- 프로그램 카운터
  - 메모리에서 가져올 명령어의 주소
  - 명령어 포인터 라고 부르는 CPU 도 있다.
- 명령어 레지스터
  - 해석할 명령어
  - 방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터.
- 메모리 주소 레지스터
  - 메모리의 주소
  - CPU 가 읽어들이고자 하는 주소 값을 주소 버스로 보낼 때, 메모리 주소 레지스터를 거치게 된다.
- 메모리 버퍼 레지스터
  - 메모리와 주고받을 값
  - CPU 가 정보를 데이터 버스로 주고 받을떼 거치는 레지스터.

- 플래그 레지스터
  - 연산 결과 또는 CPU 상태에 대한 부가적인 정보
- 범용 레지스터
  - 데이터와 주소를 모두 저장
    - 메모리버퍼 레지스타는 데이터 버스로 주고받을 값만 저장하고, 메모리 주소 레지스터는 주소 버스로 내보낼 주소값만 저장하지만 범용 레지스터는 둘다 저장함
    - 일반적으로 cpu 안에는 여러개의 범용 레지스터를 가지고 있다.
  - 다양하고 일반적인 상황에서 자유롭게 사용
- 스택 포인터
  - 스택의 꼭대기 가리킴
- 베이스 레지스터
  - 기준 주소 저장
  - 


- 프로그램 카운터
- 메모리 주소 레지스터
- 메모리 버퍼 레지스터
- 명령어 레지스터
---
1. 프로그램을 처음부터 실행하기 위해 프로그램 카운터에 주소가 저장된다.
2. 저장된 주소를 읽어들이기 위해, 메모리 주소 레지스터에 저장됩니다.
3. "메모리 읽기" 제어 신호와 메모리 주소 레지스터 값이 각각 "제어 버스" 와 "주소 버스" 를 통해 메모리로 보내집니다.
   1. CPU 제어장치를 통해 제어 신호(메모리 읽기) 는 "제어 버스"를 통해 메모리로
   2. 메모리 주소 레지스터(ex:1000)은 "주소 버스" 를 통해 메모리로
4. 메모리 ex:1000 번지에 저장된 값은 데이터 버스를 통해 "메모리 버퍼 레지스터"로 전달되고, "프로그램 카운터"는 증가되어 다음 명령어를 읽어 들일 준비를 한다.
5. 메모리 버퍼 레지스터에 저장된 값은 명령어 레지스터로 이동
6. "제어장치"는 명령어 레지스터의 명령어를 해석하고, 제어 신호를 발생시킨다.


---
#04-3 명령어 사이클과 인터럽트

- 명령어 사이클
  - CPU 가 하나의 명령어를 처리하는 정형화된 흐름
  - 인출 사이클
    - 메모리에 있는 명령어를 CPU 로 가지고 오는 단계를 인출 사이클 이라한다
  - 실행 사이클
    - CPU 로 명령어를 인축했다면, 명령어를 실행하는 단계, 명령아 사이클의 두번째 과정
    - CPU 로 가져온 명령어를 실행하는 단계를 "실행 사이클" 이라 한다.
  - 간접 사이클
    - 간접 주소 지정 방식 처럼 명령어를 가져왔더라도 바로 실행할 수 없고, 명령어를 실행하기 위해 한번더 메모리 접근을 해야 하는 단계를 "간접 사이클" 이라 한다.
- 인터럽트
  - CPU 의 작업을 방해하는 신호
  - 인터럽트는 크게 2종류로 나뉜다, 동기 인터럽트, 비동기 인터럽트
  - 동기 인터럽트
    - CPU 에 발생하는 인터럽트
    - 오류와 같은 예외상황을 동기 인터럽트 라고 부른다.
  - 비동기 인터럽트
    - 입출력 장치에 의해 발생하는 인터럽트
    - ex) 프린터의 완료, 세탁기 완료, 전자렌지 조리 완료 등 과 같은 알림 역할을 함
    - 일반적으로 비동기 인터럽트를 인터럽트가 칭하기도 함
    - 해당 비동기 인터럽트는 하드웨어 인터럽트가 칭하기로 함
    - 하드웨어 인터럽트
      - 알림과 같은 인터럽트
      - 하드웨어 인터럽트 처리 순서
        1. 입출력 장치는 CPU 에 **인터럽트 요청 신호 보냄**
        2. CPU 는 실행 사이클이 끝나고 명령어를 인출(메모리에 있는 명령어를 CPU 로 가져오는 것)하기 전 항상 인터럽트 여부를 확인함
        3. **인터럽트 플래그**를 통해 현재 인터럽트를 받을 수 있는지 확인
        4. 인터럽트를 받을 수 있다면 CPU 는 **지금까지의 작업을 스택 영역에 백업**함
        5. CPU 는 **인터럽트 벡터**를 참고하여 **인터럽트 서비스 루틴**을 실행
        6. 인터럽트 서비스 루틴 실행이 끝나면 백업해 둔 작업을 복구하여 실행을 재개함.
  

- 용어 추가
  - 인터럽트 요청 신호
    - 인터럽트를 발생시켜도 되는지 CPU 에게 질의한다.
  - 인터럽트 플래그
    - 플래그 레지스터 설정 플래그 중 하나로 인터럽트를 받아들일지, 무시할지 결정하는 플래그
    - 모든 인터렙트를 플래그로 막을 수 있는 것은 아니다.
      - 무시할 수 없는 인터럽트 요청도 있다.
        - 무시할 수 없는 하드웨어 인터럽트는 가장 우선순위가 높다. ->반드시 처리해야 하는 인터럽트
        - ex)정전, 하드웨어 고장 등
  - 인터럽트 벡터
    - CPU 는 수많은 인터럽트 서비스 루틴을 구분하기 위해 인터럽트 벡터를 이용함
    - 인터럽트 서비스를 구별하기 위한 정보
    - 서비스 루틴의 주소가 저장되어 있는듯 하다.
      - CPU 는 하드웨어 인터럽트 요청을 보낸 대상으로부터 데이터 버스를 통해 인터럽트 벡터를 전달받습니다.
      - 자료구조 vector 정도 라 생각하면 편할듯.
  - 인터럽트 서비스 루틴(인터럽트 핸들러)
    - 인터럽트를 처리하기 위한 프로그램
    - 어떤 인터럽트가 발생했을 때 해당 인터럽트를 어떻게 처리하고 작동해야 할지에 대한 정보로 이루어진 프로그램
    
  - CPU 가 인터럽트를 처리한다?
    - 인터럽트 서비스 루틴을 싫행하고, 본래 작업으로 되돌아 온다.
    - CPU 가 인터럽트 서비스 루틴을 실행하려면 인터럽트 서비스 루틴의 시작 주소를 알아야하는데 이는 **인터럽트 벡터**를 통해 알 수 있다.
    - 인터럽트 서비스 루틴을 실행하기 전에 프로그램 카운터 값 등 현재 프로그램을 재개하기위한 필요한 내용은 스택에 백업한다.
    